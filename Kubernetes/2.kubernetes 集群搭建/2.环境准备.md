# 系统初始化

```
1 关闭防火墙：
systemctl stop firewalld     # 临时
systemctl disable firewalld  # 永久

2 关闭 selinux：
sed -i 's/enforcing/disabled/' /etc/selinux/config # 永久
setenforce 0 # 临时

3 关闭 swap：
swapoff -a # 临时
sed -ri 's/.*swap.*/#&/' /etc/fstab # 永久

4 设置主机名：
hostnamectl set-hostname <hostname>
查看主机名字：
hostname

5 在 master 添加 hosts(只用在master中执行)：
cat >> /etc/hosts << EOF
192.168.31.61 k8s-master
192.168.31.62 k8s-node1
192.168.31.63 k8s-node2
EOF

6 将桥接的 IPv4 流量传递到 iptables 的链：
cat > /etc/sysctl.d/k8s.conf << EOF
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
EOF
------------
sysctl --system # 生效

7 时间同步：
yum install ntpdate -y
ntpdate time.windows.com
```

# 所有节点安装 Docker/kubeadm/kubelet

Kubernetes 默认 CRI（容器运行时）为 Docker，因此先安装 Docker。

1. 安装 Docker

   ```
   $ wget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo -O /etc/yum.repos.d/docker-ce.repo
   $ yum -y install docker-ce-18.06.1.ce-3.el7
   $ systemctl enable docker && systemctl start docker
   $ docker --version
   ```

2. 





