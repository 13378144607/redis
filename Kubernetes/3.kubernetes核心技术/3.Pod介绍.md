# Pod 有两种类型

### 普通 Pod

普通 Pod 一旦被创建，就会被放入到 etcd 中存储，随后会被 Kubernetes Master 调度到某个具体的 Node 上并进行绑定，随后该 Pod 对应的 Node 上的 kubelet 进程实例化成一组相关的 Docker 容器并启动起来。在默认情 况下，当 Pod 里某个容器停止时，Kubernetes 会自动检测到这个问题并且重新启动这个 Pod 里某所有容器， 如果 Pod 所在的 Node 宕机，则会将这个 Node 上的所有 Pod 重新调度到其它节点上。

### 静态 Pod

静态 Pod 是由 kubelet 进行管理的仅存在于特定 Node 上的 Pod,它们不能通过 API Server进行管理，无法与 ReplicationController、Deployment 或 DaemonSet 进行关联，并且kubelet 也无法对它们进行健康检查。

# Pod 生命周期和重启策略

### pod的状态

| 状态值    | 说明                                                         |
| --------- | ------------------------------------------------------------ |
| Pending   | API Server已经创建了该Pod，但Pod中的一个或多个容器的镜像还没有创建，包括镜像下载过程 |
| Running   | Pod内所有容器已创建，且至少一个容器处于运行状态、正在启动状态或正在重启状态 |
| Completed | Pod内所有容器均成功执行退出，且不会再重启                    |
| Failed    | Pod内所有容器均已退出，但至少一个容器退出失败                |
| Unknown   | 由于某种原因无法获取Pod状态，例如网络通信不畅                |

### Pod 重启策略

Pod 的重启策略包括 Always、OnFailure 和 Never，默认值是 Always

| 重启策略  | 说明                                                   |
| --------- | ------------------------------------------------------ |
| ALways    | 当容器失效时，由kubelet自动重启该容器                  |
| OnFailure | 当容器终止运行且退出码不为0时，由kubelet自动重启该容器 |
| Never     | 不论容器运行状态如何，kubelet都不会重启该容器          |

### 常见状态转换

| pod包含的容器数 | Pod当前的状态 | 发生事件        | Pod的结果状态        |                         |                     |
| --------------- | ------------- | --------------- | -------------------- | ----------------------- | ------------------- |
|                 |               |                 | RestartPolicy=Always | RestartPolicy=OnFailure | RestartPolicy=Never |
| 包含一个容器    | Running       | 容器成功退出    |                      |                         |                     |
| 包含一个容器    | Running       | 容器失败退出    |                      |                         |                     |
| 包含两个容器    | Running       | 1个容器失败退出 |                      |                         |                     |
| 包含两个容器    | Running       | 容器被OOM杀掉   |                      |                         |                     |









