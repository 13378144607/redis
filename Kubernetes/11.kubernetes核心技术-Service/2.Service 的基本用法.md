### Service 的基本用法

- 一般来说，对外提供服务的应用程序需要通过某种机制来实现，对于容器应用最简便的方式就是通过 TCP/IP 机制及 监听 IP 和端口号来实现。创建一个基本功能的 Service

  ```yaml
  apiVersion: v1
  kind: ReplicationController metadata:
  name: mywebapp spec:
  replicas: 2 template:
  metadata:
  name: mywebapp labels:
  app: mywebapp spec:
  containers:
  -name: mywebapp image: tomcat ports:
  -containerPort: 8080
  ```

- 我们可以通过 kubectl get pods -l app=mywebapp -o yaml | grep podIP 来获取

  Pod 的 IP 地址和端口号来访问 Tomcat 服务，但是直接通过 Pod 的 IP 地址和端口访问应用服务是不可靠的，因为当 Pod 所在的 Node 发生故障时， Pod 将被 kubernetes 重新调度到另一台 Node，Pod 的地址会发生改变。我们可以通过配置文件来定义 Service，再通过kubectl create 来创建，这样可以通过 Service 地址来访问后端的 Pod。

  











